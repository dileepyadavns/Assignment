<html>
  <head>

  </head>
</html>
<body>

<div ><h3 style="color:blueviolet; font-size:20px">Students</h3></div>
<div>
  <div >
  
    <div  role="alert">
  
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">×</span>
      </button>
    </div>
 
    <div >
      <form action="{{url_for('add_student')}}" method="POST">
        <div >
          <input type="text" class="form-control" name="fname" placeholder="First Name">
        </div>
        <div >
          <input type="text" class="form-control" name="lname" placeholder="Last Name">
        </div>
        <div >
          <input type="email" class="form-control" name="email" placeholder="Email">
        </div>
        <button >
          Save 
        </button>
      </form>
    </div>
  </div>

  <div class="col-md-8">
    <table id="example" class="table table-striped table-bordered" style="width:100%">
      <thead>
        <tr>
          <td>ID</td>
          <td>First Name</td>
          <td>Last Name</td>
          <td>Email</td>
          <td>Action</td>
        </tr>
      </thead>
      <tbody id="rows">
       
      
       
      </tbody>
    </table>
  </body>
  </div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>


function ajax_get(url, ajax_fetch) {
    var xmlhttp = new XMLHttpRequest();  //object
    xmlhttp.onreadystatechange = function() { // called whenever ready state changes function triggers
      //ready state describes loading state of document whwnever property changes readystatechange event fires
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) { //4 indicates request is finished and resposne is ready ,200 means ok
        
            console.log('responseText:' + xmlhttp.responseText);
            try {
                var data = JSON.parse(xmlhttp.responseText); //converts the json string to original object
            } catch(err) {
                console.log(err.message + " in " + xmlhttp.responseText);
                return;
            }
            ajax_fetch(data);
        }
    };
 
    xmlhttp.open("GET", url, true); //open method used toopen connection to server
    xmlhttp.send(); //send will send request object to server
}
 
ajax_get('/jsono', function(data) {
   console.log(data)
   for (let i = 0; i < data.length; i++) {
     var tb=document.getElementById('rows')
     var tr=document.createElement('tr')
     var tdB=document.createElement("td")
    var a1=document.createElement("a")
    var a2=document.createElement("a")
     var tr2=document.createElement("tr")
     var td1=document.createElement("td")
     var td2=document.createElement("td")
     var td3=document.createElement("td")
     var td4=document.createElement('td')
     td1.innerHTML=data[i].id
     td2.innerHTML=data[i].fname
     td3.innerHTML=data[i].lname
     td4.innerHTML=data[i].email
     a1.href='/edit/'+data[i].id
     a1.innerHTML="Edit"
     a2.innerHTML="Delete"
     a2.href='/delete/'+data[i].id //gives the id of the row which we want to delete
     tdB.append(a1,a2)
     tr.append(td1,td2,td3,td4,tdB)
     tb.appendChild(tr) // ro add element
     
}
});
 
</script>
<html>